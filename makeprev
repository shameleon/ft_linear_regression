PY      = python3
VENV    = venv
BIN     = $(VENV)/bin
SRC     = ./ft_linear_regression

#run:
#python $(PWD)/predict.py

# virtual environment
venv: $(VENV)

$(VENV): requirements.txt
    @echo 'Installing virtual environment'
    @virtualenv $(VENV)
    source $(BIN)/activate
    @pip install --upgrade -r requirements.txt

activate: $(VENV)
    source env/bin/activate

deactivate:
    source deactivate

test: $(VENV)
    $(BIN)/pytest
    py.test tests

flake: $(VENV)
    flake8 $(SRC)/*.py

list: $(VENV)
    $(PY) -m pip list

clean:
    @echo "Removing virtual environment"
    rm -rf $(VENV)
    rm -rf $(SRC)/__pycache__
    find . -type d -name "__pycache__" | xargs rm -rf {};
    find -iname "*.pyc" -delete

.PHONY: run setup test clean